<!DOCTYPE html>
<html class="dark" lang="zh-Hant">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>OSINT Defense & Tools</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <script>
    tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
                colors: {
                    "primary": {
                        "DEFAULT": "#3b82f6",
                        "light": "#60a5fa",
                        "dark": "#2563eb"
                    },
                    "secondary": {
                        "DEFAULT": "#8b5cf6",
                        "light": "#a78bfa",
                        "dark": "#7c3aed"
                    },
                    "background-light": "#f6f7f8",
                    "background-dark": "#020414",
                    "slate": {
                        "900": "#0F172A",
                        "800": "#1E293B",
                        "700": "#334155",
                        "400": "#94A3B8"
                    }
                },
                fontFamily: {
                    "display": ["Inter", "Noto Sans TC", "sans-serif"]
                },
                boxShadow: {
                    'glow': '0 0 15px rgba(59, 130, 246, 0.4), 0 0 30px rgba(139, 92, 246, 0.3)',
                },
                backgroundImage: {
                    'grid': 'linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)',
                },
                backgroundSize: {
                    'grid': '40px 40px'
                },
            },
        },
    }
    </script>
    <style>
    .material-symbols-outlined {
        font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24
    }
    body {
        margin: 0;
        overflow-x: hidden;
    }
    .card-glow:hover {
        box-shadow: 0 0 15px rgba(59, 130, 246, 0.4), 0 0 30px rgba(139, 92, 246, 0.3);
        border-color: rgba(59, 130, 246, 0.6);
    }
    .text-gradient {
        background: linear-gradient(90deg, #60a5fa, #a78bfa);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    #bg-video {
        position: fixed;
        right: 0;
        bottom: 0;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        z-index: -20;
        object-fit: cover;
    }
    #video-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #020414;
        opacity: 0.3;
        z-index: -10;
    }
    
    /* 修正地圖容器層級 */
    #map-container {
        z-index: 1;
    }
    
    /* 自定義 Leaflet Popup 樣式以配合深色主題 */
    .leaflet-popup-content-wrapper, .leaflet-popup-tip {
        background: #1e293b; /* slate-800 */
        color: #fff;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
    }
    .leaflet-container a.leaflet-popup-close-button {
        color: #94a3b8;
    }
    </style>
</head>
<body class="bg-transparent font-display text-white">

    <video autoplay muted loop playsinline id="bg-video">
        <source src="Page2.mp4" type="video/mp4">
    </video>

    <div id="video-overlay" class="bg-grid"></div>

    <div class="relative z-10 flex min-h-screen w-full flex-col">
        
        <header class="sticky top-0 z-50 flex items-center justify-center border-b border-solid border-slate-700/50 bg-background-dark/60 px-4 py-3 backdrop-blur-md">
            <div class="flex w-full max-w-7xl items-center justify-between">
                <div class="flex items-center gap-4 text-white">
                    <div class="size-8 text-primary">
                        <span class="material-symbols-outlined !text-4xl">hub</span>
                    </div>
                    <h2 class="text-lg font-bold tracking-[-0.015em] text-white">OSINT Attack Chain</h2>
                </div>
                <nav class="hidden items-center gap-8 md:flex">
                    <a class="text-sm font-medium text-slate-400 transition-colors hover:text-primary-light" href="index1.html">首頁：威脅概覽</a>
                    <a class="text-sm font-medium text-slate-400 transition-colors hover:text-primary-light" href="index2.html">攻擊鍊詳解</a>
                    <a class="relative text-sm font-bold text-primary-light" href="index3.html">防禦與工具</a>
                </nav>
            </div>
        </header>

        <main class="flex w-full grow flex-col items-center px-4 py-8 sm:px-6 md:py-16 lg:px-8">
            <div class="flex w-full max-w-7xl flex-col gap-16">
                <section class="@container">
                    <div class="flex flex-col gap-8 rounded-xl border border-slate-700/50 bg-slate-900/60 p-8 shadow-2xl backdrop-blur-sm items-center justify-center">
                        <div class="flex flex-col gap-4 text-center w-full">
                            <h1 class="text-4xl font-black leading-tight tracking-tight text-white sm:text-5xl lg:text-6xl">OSINT <span class="text-gradient">防禦策略</span>與實用工具</h1>
                            <p class="text-base font-normal leading-normal text-slate-300 @[480px]:text-lg">本頁介紹實用的工具和策略，幫助您提升網路安全防護能力，有效應對 OSINT 相關的攻擊與威脅。</p>
                        </div>
                    </div>
                </section>

                <section class="flex flex-wrap gap-3 p-3 justify-center">
                    <button class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full bg-gradient-to-r from-primary to-secondary px-4 text-sm font-bold text-white shadow-glow transition-all duration-300">全部</button>
                    <button class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full border border-slate-700 bg-slate-800/80 px-4 text-sm font-medium text-slate-300 transition-colors hover:border-primary hover:text-primary-light">個人隱私防護</button>
                    <button class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full border border-slate-700 bg-slate-800/80 px-4 text-sm font-medium text-slate-300 transition-colors hover:border-primary hover:text-primary-light">企業安全策略</button>
                    <button class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full border border-slate-700 bg-slate-800/80 px-4 text-sm font-medium text-slate-300 transition-colors hover:border-primary hover:text-primary-light">資料洩露監控工具</button>
                    <button class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full border border-slate-700 bg-slate-800/80 px-4 text-sm font-medium text-slate-300 transition-colors hover:border-primary hover:text-primary-light">社交工程防禦</button>
                </section>

                <section>
                    <h2 class="px-4 pb-4 pt-5 text-3xl font-bold leading-tight tracking-tight text-white">Defensive Strategies</h2>
                    <div class="grid grid-cols-1 gap-6 p-4 md:grid-cols-2">
                        <div class="flex flex-col gap-6">
                            <div class="relative overflow-hidden rounded-xl border border-slate-700/50 bg-slate-900/70 p-6 transition-all duration-300 hover:border-primary/50 hover:bg-slate-900/90 backdrop-blur-md">
                                <div class="absolute -left-16 -top-16 size-48 rounded-full bg-primary/10 blur-3xl"></div>
                                <div class="relative z-10 flex flex-col gap-3">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-3xl text-primary-light">person</span>
                                        <h3 class="text-xl font-bold text-white">個人層級防禦</h3>
                                    </div>
                                    <p class="text-base font-normal leading-relaxed text-slate-400">涵蓋如何管理社群媒體隱私、減少數位足跡、使用假名等策略，保護個人資訊免於洩漏。</p>
                                </div>
                            </div>
                            
                            <div class="relative flex flex-col overflow-hidden rounded-xl border border-slate-700/50 bg-slate-900/70 backdrop-blur-md">
                                <div class="h-64 w-full relative bg-slate-800 group map-dark-mode" id="map-container">
                                    <div id="osintMap" class="w-full h-full z-0"></div>
                                    
                                    <div class="absolute top-2 right-2 z-[400] pointer-events-none rounded bg-black/60 px-2 py-1 text-xs text-white backdrop-blur">
                                        Carto Voyager Mode
                                    </div>
                                </div>
                                
                                <div class="flex flex-col gap-4 p-6 bg-slate-900/40">
                                    <div class="flex items-center justify-between">
                                        <h4 class="text-lg font-bold text-white">地理位置防禦策略</h4>
                                        <span class="material-symbols-outlined text-primary-light">map</span>
                                    </div>
                                    
                                    <div class="flex w-full gap-2">
                                        <input 
                                            type="text" 
                                            id="locationInput" 
                                            placeholder="輸入座標 (25.03, 121.56) 或 地點..." 
                                            class="flex-1 rounded-md border border-slate-600 bg-slate-800 px-3 py-2 text-sm text-white placeholder-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"
                                            onkeypress="if(event.key === 'Enter') searchLocation()"
                                        />
                                        <button 
                                            onclick="searchLocation()"
                                            class="inline-flex items-center justify-center rounded-md bg-primary px-3 py-2 text-white hover:bg-primary-dark transition-colors">
                                            <span class="material-symbols-outlined !text-lg">search</span>
                                        </button>
                                    </div>

                                    <p class="text-sm text-slate-300">輸入特定座標或地址以評估周邊環境風險 (使用 Carto Maps)。</p>
                                </div>
                            </div>
                            </div>

                        <div class="relative overflow-hidden rounded-xl border border-slate-700/50 bg-slate-900/70 p-6 transition-all duration-300 hover:border-primary/50 hover:bg-slate-900/90 backdrop-blur-md h-full">
                            <div class="absolute -right-16 -bottom-16 size-48 rounded-full bg-secondary/10 blur-3xl"></div>
                            <div class="relative z-10 flex flex-col gap-3 h-full">
                                <div class="flex items-center gap-3">
                                    <span class="material-symbols-outlined text-3xl text-secondary-light">corporate_fare</span>
                                    <h3 class="text-xl font-bold text-white">企業層級防禦</h3>
                                </div>
                                <p class="text-base font-normal leading-relaxed text-slate-400">介紹員工安全意識培訓、資料外洩防護 (DLP) 政策、供應鏈風險評估等主題，建立堅實的組織防線。</p>
                                <div class="mt-auto pt-4">
                                     <div class="rounded-lg border border-slate-700 bg-slate-800/50 p-4">
                                        <div class="flex items-center gap-2 text-sm text-slate-300">
                                            <span class="material-symbols-outlined text-green-400">check_circle</span>
                                            <span>DLP 政策已啟用</span>
                                        </div>
                                        <div class="mt-2 h-2 w-full rounded-full bg-slate-700">
                                            <div class="h-2 w-3/4 rounded-full bg-secondary"></div>
                                        </div>
                                        <p class="mt-1 text-right text-xs text-slate-500">系統安全評分: 85/100</p>
                                     </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="px-4 pb-4 pt-5 text-3xl font-bold leading-tight tracking-tight text-white">Practical Tools</h2>
                    <div class="grid grid-cols-1 gap-6 p-4 sm:grid-cols-2 lg:grid-cols-4">
                        <a href="https://haveibeenpwned.com/" target="_blank" class="card-glow group relative flex flex-col justify-between overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/50 p-6 transition-all duration-300 hover:-translate-y-1">
                            <div class="flex items-center gap-4">
                                <div class="flex size-12 items-center justify-center rounded-lg bg-red-500/20 text-red-400 group-hover:bg-red-500 group-hover:text-white transition-colors">
                                    <span class="material-symbols-outlined">warning</span>
                                </div>
                                <h3 class="text-lg font-bold text-white">Have I Been Pwned</h3>
                            </div>
                            <p class="mt-4 text-sm text-slate-400">檢查您的 Email 或電話號碼是否在已知的資料外洩事件中被公開。</p>
                        </a>

                        <a href="https://bitwarden.com/" target="_blank" class="card-glow group relative flex flex-col justify-between overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/50 p-6 transition-all duration-300 hover:-translate-y-1">
                            <div class="flex items-center gap-4">
                                <div class="flex size-12 items-center justify-center rounded-lg bg-blue-500/20 text-blue-400 group-hover:bg-blue-500 group-hover:text-white transition-colors">
                                    <span class="material-symbols-outlined">lock</span>
                                </div>
                                <h3 class="text-lg font-bold text-white">Bitwarden</h3>
                            </div>
                            <p class="mt-4 text-sm text-slate-400">開源的密碼管理器，協助生成並安全儲存複雜密碼，防止憑證填充攻擊。</p>
                        </a>

                        <a href="https://privacybadger.org/" target="_blank" class="card-glow group relative flex flex-col justify-between overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/50 p-6 transition-all duration-300 hover:-translate-y-1">
                            <div class="flex items-center gap-4">
                                <div class="flex size-12 items-center justify-center rounded-lg bg-yellow-500/20 text-yellow-400 group-hover:bg-yellow-500 group-hover:text-white transition-colors">
                                    <span class="material-symbols-outlined">visibility_off</span>
                                </div>
                                <h3 class="text-lg font-bold text-white">Privacy Badger</h3>
                            </div>
                            <p class="mt-4 text-sm text-slate-400">自動學習並封鎖在網路上跟蹤您行為的隱形追蹤器。</p>
                        </a>

                        <a href="https://signal.org/" target="_blank" class="card-glow group relative flex flex-col justify-between overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/50 p-6 transition-all duration-300 hover:-translate-y-1">
                            <div class="flex items-center gap-4">
                                <div class="flex size-12 items-center justify-center rounded-lg bg-primary/20 text-primary-light group-hover:bg-primary group-hover:text-white transition-colors">
                                    <span class="material-symbols-outlined">chat</span>
                                </div>
                                <h3 class="text-lg font-bold text-white">Signal</h3>
                            </div>
                            <p class="mt-4 text-sm text-slate-400">端對端加密通訊軟體，確保訊息不被第三方攔截或讀取。</p>
                        </a>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <script>
        // 初始化地圖
        // 預設位置：台北 (可自行更改)
        const defaultLat = 25.0339;
        const defaultLng = 121.5644;
        
        var map = L.map('osintMap', {
            zoomControl: true,
            attributionControl: false // 隱藏預設版權資訊以保持簡潔，或自行加入
        }).setView([defaultLat, defaultLng], 13);

        // ============================================
        // 使用 Carto Voyager (質感亮色)
        // ============================================
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);

        var currentMarker = null;

        // 搜尋功能
        function searchLocation() {
            const query = document.getElementById('locationInput').value.trim();
            if (!query) return;

            // 判斷是否為座標格式 (簡單正則判斷：數字, 數字)
            const coordPattern = /^(-?\d+(\.\d+)?),\s*(-?\d+(\.\d+)?)$/;
            const match = query.match(coordPattern);

            if (match) {
                // 如果是座標
                const lat = parseFloat(match[1]);
                const lng = parseFloat(match[3]);
                updateMap(lat, lng, `座標: ${lat}, ${lng}`);
            } else {
                // 如果是地址/關鍵字，使用 Nominatim API
                const apiUrl = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`;
                
                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        if (data && data.length > 0) {
                            const lat = parseFloat(data[0].lat);
                            const lng = parseFloat(data[0].lon);
                            const displayName = data[0].display_name.split(',')[0]; // 只取第一段名稱
                            updateMap(lat, lng, displayName);
                        } else {
                            alert('找不到該地點，請嘗試更具體的名稱或使用座標。');
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('搜尋發生錯誤。');
                    });
            }
        }

        // 更新地圖與標記
        function updateMap(lat, lng, popupText) {
            // 移動地圖
            map.flyTo([lat, lng], 16);

            // 移除舊標記
            if (currentMarker) {
                map.removeLayer(currentMarker);
            }

            // 新增標記
            currentMarker = L.marker([lat, lng]).addTo(map)
                .bindPopup(popupText)
                .openPopup();
        }
    </script>
</body>
</html>